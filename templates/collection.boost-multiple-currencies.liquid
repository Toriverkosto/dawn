{%- comment -%} Please donâ€™t update this content {%- endcomment -%}
{%- comment -%} This collection template is used to integrate boost product filter with 3rd party apps {%- endcomment -%}

{% layout none %}
{
  "products":
    [
      {%- for tag in current_tags -%}
        {
          {%- assign product_handle = tag | handle -%}
          {%- assign product = all_products[product_handle] -%}
                  
          "id":{{ product.id | json }},          
          "compare_at_price_min": {{ product.compare_at_price_min }},
          "price_min": {{ product.price_min }},
          "price_max": {{ product.price_max }},
					"variants": [
          {%- for variant in product.variants -%}
            {
    					"id": {{ variant.id }},
    					"price": {{ variant.price | default: 0 }},
    				  "compare_at_price": {{ variant.compare_at_price | default: 0 }}
    			  }
    				{%- unless forloop.last -%},{%- endunless -%}
          {%- endfor -%}
          ]
        }
        {%- unless forloop.last -%},{%- endunless -%}
      {%- endfor -%}
    ]
}